<div class="catalog-container">
  <h2>Catalogue des produits</h2>

  <div *ngIf="loading" style="text-align:center;padding:60px">
    <mat-spinner diameter="48" style="margin:auto"></mat-spinner>
  </div>

  <div class="product-grid" *ngIf="!loading">
    <mat-card class="product-card" *ngFor="let p of products">
      <img mat-card-image
           [src]="p.imageUrl || 'https://via.placeholder.com/300x200'"
           [alt]="p.name"
           style="height:200px;object-fit:cover">

      <mat-card-header>
        <mat-card-title>{{ p.name }}</mat-card-title>
        <mat-card-subtitle style="font-size:18px;font-weight:600;color:#3f51b5">
          {{ p.price | currency:'EUR' }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p>{{ p.description }}</p>
        <small [class.out-of-stock]="p.stock === 0">
          <mat-icon style="font-size:14px;vertical-align:middle">
            {{ p.stock > 0 ? 'check_circle' : 'cancel' }}
          </mat-icon>
          {{ p.stock > 0 ? 'En stock (' + p.stock + ')' : 'Rupture de stock' }}
        </small>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button color="primary"
                [disabled]="p.stock === 0"
                (click)="addToCart(p)"
                style="width:100%">
          <mat-icon>add_shopping_cart</mat-icon>
          Ajouter au panier
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div *ngIf="!loading && products.length === 0"
       style="text-align:center;padding:60px;color:#888">
    <mat-icon style="font-size:64px;width:64px;height:64px">store</mat-icon>
    <p>Aucun produit disponible.</p>
  </div>
</div>
